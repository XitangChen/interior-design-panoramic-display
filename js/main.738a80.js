(()=>{"use strict";var e,t,n,l={34552:(e,t,n)=>{var l=n(67294),a=n(20745),r=n(11189),c=n.n(r),i=(n(33948),n(97606)),o=n.n(i),s=n(86515),u=n(16716),d=n(23279),m=n.n(d),p=n(67294);function f(e,t,n){const a=(0,l.useCallback)(m()(n,100),[n]),[r]=(0,l.useState)(new s.X([300,150])),[c]=(0,l.useState)(new u.x);!function(e,t){const[n]=(0,l.useState)(new ResizeObserver((e=>{var n;let[l]=e;const{width:a,height:r}=l.contentRect;t.next(o()(n=[a,r]).call(n,(e=>Math.floor(e))))})));(0,l.useEffect)((()=>{return(t=e.current)&&n.observe(t),()=>{t&&(null==n||n.unobserve(t)),null==n||n.disconnect()};var t}),[])}(t,r),(0,l.useLayoutEffect)((()=>(e.current&&a(e.current,r.asObservable(),c.asObservable(),t.current),()=>{c.next()})),[])}function v(e){let{init:t,renderMoreContent:n}=e;const a=(0,l.useRef)(null),r=(0,l.useRef)(null);return f(a,r,t),p.createElement("div",{className:"canvas-container",ref:r},p.createElement("div",{className:"canvas-container-inner"},p.createElement("canvas",{ref:a})),null==n?void 0:n(r))}var h=n(26171),b=n(30680),g=n(42424),w=n(6226),E=n.n(w),y=n(51679),x=n.n(y),R=n(76986),Z=n.n(R),S=n(86),O=n.n(S),k=n(28886),j=n.n(k),C=n(19030),N=n.n(C),P=n(92039),F=n.n(P),T=(n(88674),n(99477)),_=n(69365),M=n(79940),z=n(83505),I=n(78833),L=n(94975),A=n(42006),B=n(34978),q=n(48017);function D(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var H=new(j()),X=new(j());class U{constructor(){D(this,H,{writable:!0,value:!0}),D(this,X,{writable:!0,value:!1})}get stopped(){return(0,g.Z)(this,H)}set stopped(e){(0,b.Z)(this,H,e)}get disableRotating(){return(0,g.Z)(this,X)}set disableRotating(e){(0,b.Z)(this,X,e)}}function Y(e,t){G(e,t),t.add(e)}function K(e,t,n){G(e,t),t.set(e,n)}function G(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Q=new(j()),V=new(j()),$=new(j()),W=new(j()),ee=new(j()),te=new(j()),ne=new(N()),le=new(N()),ae=new(N()),re=new(N()),ce=new(N());class ie{get loading(){return(0,g.Z)(this,te)}set loading(e){(0,g.Z)(this,te)!==e&&((0,b.Z)(this,te,e),(0,g.Z)(this,$).next(e))}get mute(){return(0,g.Z)(this,W).stopped}constructor(){Y(this,ce),Y(this,re),Y(this,ae),Y(this,le),Y(this,ne),K(this,Q,{writable:!0,value:new s.X("")}),K(this,V,{writable:!0,value:new u.x}),K(this,$,{writable:!0,value:new u.x}),K(this,W,{writable:!0,value:new U}),K(this,ee,{writable:!0,value:new T.BbS(new T.SJI)}),(0,h.Z)(this,"loading$",(0,g.Z)(this,$).asObservable()),K(this,te,{writable:!0,value:!0}),(0,g.Z)(this,W).stopped=!0}updateTexture(e){(0,g.Z)(this,Q).next(e)}onClick(e,t){(0,g.Z)(this,V).next({type:e,status:t})}init(e,t,n,l){const a=[e.offsetWidth,e.offsetHeight],r=function(e,t){const n=new T.CP7({canvas:e,antialias:!0});return n.setSize(...t),n.setPixelRatio(window.devicePixelRatio),n}(e,a),c=new T.xsS,{camera:i}=function(e,t){const n=new T.cPb(60,e,1,1e3);return n.zoom=1,n.updateProjectionMatrix(),n.position.set(-.87,.03,.4),n.lookAt(t),{camera:n}}(a[0]/a[1],c.position);Z()(new _.z(i,e),{enablePan:!1,enableZoom:!1}),t.pipe((0,z.R)(n)).subscribe((e=>{var t;let[n,l]=e;O()(t=[n,l]).call(t,((e,t)=>{a[t]=e})),i.aspect=n/l,i.updateProjectionMatrix(),r.setSize(n,l)}));const{mesh:o}=function(e){const t=new T.Kj0(new T.xo$(25,50,50),new T.vBJ({color:16777215,side:T._Li}));return e.add(t),{mesh:t}}(c);J(this,le,se).call(this,n,function(e){var t;const n=new u.x,l=x()(t=[["hidden","visibilitychange"],["msHidden","msvisibilitychange"],["webKitHidden","webkitvisibilitychange"],["oHidden","ovisibilitychange"]]).call(t,(e=>{let[t]=e;return t in document}));if(l){const[t,a]=l,r=()=>n.next(Boolean(document[t])),c=!1;document.addEventListener(a,r,c),e.pipe((0,M.P)()).subscribe((()=>{}))}return n.asObservable()}(n).pipe((0,z.R)(n))),J(this,ce,me).call(this,o,n),(0,g.Z)(this,V).pipe((0,z.R)(n)).subscribe(J(this,re,de).call(this,{container:l}));const s=(0,g.Z)(this,W),d=new T.SUY;let m=0;!function(e,t){let n=NaN,l=!1;const a=t=>{e(t),!l&&(n=requestAnimationFrame(a))};n=requestAnimationFrame(a),t.pipe((0,M.P)()).subscribe((()=>{cancelAnimationFrame(n),l=!0}))}((()=>{m+=d.getDelta(),m>.03333333333333333&&(r.render(c,i),!s.disableRotating&&o.rotateY(.002),m=0)}),n)}}async function oe(){const e=(0,g.Z)(this,ee),t=await new(E())(((e,t)=>(new T.mTL).load("media/琵琶语.mp3",e,void 0,t)));e.setBuffer(t),e.setLoop(!0),e.setVolume(.3)}function se(e,t){var n;const l=(0,g.Z)(this,ee),a=c()(n=J(this,ae,ue)).call(n,this);a((0,g.Z)(this,W).stopped),t.subscribe((e=>a((0,g.Z)(this,W).stopped||e))),e.pipe((0,M.P)()).subscribe((()=>{l.stop(),l.disconnect(),l.clear()}))}async function ue(e){const t=(0,g.Z)(this,ee);e||t.buffer||await J(this,ne,oe).call(this),e?t.pause():t.play()}function de(e){var t;let{container:n}=e;(0,g.Z)(this,V);const l=(0,g.Z)(this,W),a=c()(t=J(this,ae,ue)).call(t,this);return e=>{var t,r;let{type:c,status:i}=e;null===(t=(r={toggleAudio(){l.stopped=i,a(i)},toggleFullscreen(){var e;F()(e=[i?[["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"]]:[["exitFullScreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen"],document]]).call(e,(e=>{let[t,l]=e;const a=l||n;return F()(t).call(t,(e=>{const t=a[e];return!!t&&(t.call(a),!0)}))}))},toggleRotation(){l.disableRotating=i}})[c])||void 0===t||t.call(r)}}function me(e,t){let n;(0,g.Z)(this,Q).pipe((0,z.R)(t),(0,I.b)(100),(0,L.h)((e=>e!==n)),(0,A.b)((e=>{this.loading=!0,n=e})),(0,B.w)((t=>(0,q.D)(async function(e,t){const{material:n}=e;try{const e=await new(E())(((e,n)=>{(new T.dpR).load(t,e,void 0,n)}));e.colorSpace=T.KI_,n.map=e}catch(e){n.map=new T.xEZ}n.needsUpdate=!0}(e,t)))),(0,A.b)((()=>this.loading=!1))).subscribe()}var pe=n(28222),fe=n.n(pe),ve=n(80222),he=n.n(ve),be=n(14418),ge=n.n(be),we=n(8446),Ee=n.n(we),ye=n(66870),xe=n.n(ye),Re=n(29747),Ze=n.n(Re),Se=n(96718),Oe=n.n(Se),ke=n(58309),je=n.n(ke),Ce=n(52861);var Ne=function(e){return e.PENDING="pending",e.ERROR="error",e.SUCCESS="success",e}(Ne||{});var Pe=n(83449),Fe=n(42507);const Te={"loading-spin-container":"aMXnX1ueUwXyQIjfxGeq"};var _e=n(67294);function Me(e){let{tip:t}=e;return _e.createElement(Pe.Z,{direction:"vertical",className:Te["loading-spin-container"]},_e.createElement(Fe.Z,{tip:t||"Loading",size:"large"},_e.createElement("div",{className:"content"})))}var ze=n(39940),Ie=n.n(ze),Le=n(60650);const Ae={tools:"NLx3j_I9vTHvjBDIZx9h","menu-nav":"Z4F2204SMuAr44u8f8iZ","help-info-modal":"Y1c34Q5zt5UoWNk9khcm","page-nav":"K_OpuTbYsbvI_9MHZTT4",total:"PHsJTSFTYFRrzBrDK1n1",text:"a1hHcTXztgFfXVqc51ET",prev:"PaY3fFx_pxTohN5hlQX4",next:"Y1jn1LgbMbNVIpcAh6Rs"},Be=(0,l.createContext)(new ie);var qe,De=n(67294);function He(e,t){var n=fe()(e);if(he()){var l=he()(e);t&&(l=ge()(l).call(l,(function(t){return Ee()(e,t).enumerable}))),n.push.apply(n,l)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n,l,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=He(Object(a),!0)).call(n,(function(t){(0,h.Z)(e,t,a[t])})):xe()?Ze()(e,xe()(a)):O()(l=He(Object(a))).call(l,(function(t){Oe()(e,t,Ee()(a,t))}))}return e}function Ue(e,t){const{icons:n,type:l}=e;return e.icon=n[e.icon[0]===n[0][0]?1:0],l&&t.onClick(l,e.icon[0]!==e.icons[0][0]),!0}const Ye=o()(qe=[{name:"声音",icons:[["打开声音.png","关闭声音"],["关闭声音.png","打开声音"]],click:Ue,type:"toggleAudio"},{name:"全屏",icons:[["全屏5.png","全屏"],["退出全屏.png","退出全屏"]],click:Ue,type:"toggleFullscreen"},{label:"旋转",icons:[["旋转.png","停止旋转"],["停止旋转.png","旋转"]],click:Ue,type:"toggleRotation"},{name:"帮助",icons:[["帮助5.png","操作提示"]]}]).call(qe,(e=>{const{icons:t}=e;return Xe(Xe({},e),{},{icons:t.length<2?[...t,...t]:t,icon:e.icons[0]})}));function Ke(e,t){var n,l;let{type:a,fullscreenElementExisting:r}=t;const c=()=>o()(e).call(e,(e=>Xe({},e)));return(null===(n=(l={update:c,fullscreenchange(){const t=Xe(Xe({},!r&&{全屏:e=>{e.icon=e.icons[0]}}),{},{帮助:e=>{e.hidden=r}}),n=fe()(t);return F()(e).call(e,(e=>{if(!n.length)return!0;const{name:l}=e,a=t[l];return a&&(a(e),F()(n).call(n,((e,t)=>e===l&&(Ie()(n).call(n,t,1),!0)))),!1})),c()}})[a])||void 0===n?void 0:n.call(l))||e}function Ge(){const e=(0,l.useContext)(Be),{modal:t}=Le.Z.useApp(),[n,a]=(0,l.useReducer)(Ke,Ye),r=(0,l.useCallback)((n=>{var l;"帮助"===n.name?function(e,t){const n=()=>!!e.modalRef&&(e.modalRef.destroy(),e.modalRef=void 0,!0);n()||(e.modalRef=t.info({title:"操作提示",className:Ae["help-info-modal"],content:De.createElement("dl",null,De.createElement("dt",null,"旋转操作："),De.createElement("dd",null,"按住左键不放上下左右拖动，可以旋转整个场景")),onOk:n}))}(n,t):null!==(l=n.click)&&void 0!==l&&l.call(n,n,e)&&a({type:"update"})}),[]);return function(e,t,n){const l=x()(e).call(e,(e=>"声音"===e.name));if(l){const e=l.icons[t?1:0];l.icon!==e&&(l.icon=e,n({type:"update"}))}}(n,e.mute,a),(0,l.useEffect)((()=>{const e=function(e){const t="fullscreenchange",n=()=>e(!!document.fullscreenElement);return document.addEventListener(t,n,!1),()=>document.removeEventListener(t,n,!1)}((e=>{a({type:"fullscreenchange",fullscreenElementExisting:e})}));return()=>{O()(n).call(n,(e=>{e.modalRef&&e.modalRef.destroy(),e.modalRef=void 0})),e()}}),[]),De.createElement("div",{className:Ae.tools},o()(n).call(n,((e,t)=>e.hidden?null:De.createElement("button",{type:"button",key:[e.name,t].join("_"),onClick:()=>r(e)},De.createElement("img",{src:"images/icons/".concat(e.icon[0]),alt:e.name,title:e.icon[1],width:"22",height:"22"})))))}function Je(){return De.createElement(Le.Z,null,De.createElement(Ge,null))}var Qe=n(39022),Ve=n.n(Qe),$e=n(67724),We=n(8812),et=n(67294);function tt(e){var t;let{total:n,pageIndex:l,pageSize:a,onClick:r}=e;return et.createElement("p",{className:Ae["page-nav"]},et.createElement("span",{className:Ae.total},n?Ve()(t="".concat(l||0,"/")).call(t,a?Math.ceil(n/a):0):0),et.createElement("button",{type:"button",className:Ae.prev,onClick:()=>r(-1)},et.createElement($e.Z,null),et.createElement("span",{className:Ae.text},"上一张")),et.createElement("button",{type:"button",className:Ae.next,onClick:()=>r(1)},et.createElement(We.Z,null),et.createElement("span",{className:Ae.text},"下一张")))}var nt=n(67294);function lt(e,t){var n=fe()(e);if(he()){var l=he()(e);t&&(l=ge()(l).call(l,(function(t){return Ee()(e,t).enumerable}))),n.push.apply(n,l)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n,l,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=lt(Object(a),!0)).call(n,(function(t){(0,h.Z)(e,t,a[t])})):xe()?Ze()(e,xe()(a)):O()(l=lt(Object(a))).call(l,(function(t){Oe()(e,t,Ee()(a,t))}))}return e}const rt=function(e){let t,n=Ne.PENDING;const l=e.then((e=>{n=Ne.SUCCESS,t=e}),(e=>{n=Ne.ERROR,t=e}));return{read(){var e,a;return null===(e=(a={[Ne.PENDING](){throw l},[Ne.ERROR](){throw t},[Ne.SUCCESS]:()=>t})[n])||void 0===e?void 0:e.call(a)}}}(async function(){return(await Ce.Z.get("data/decoration-style-info.json")).data}());function ct(e,t){var n;let{type:l,payload:a}=t;const r={selectStyle(){const{name:t}=a;return o()(e).call(e,(e=>{var n;const l=e.name===t;return at(at({},e),{},{selected:l,parts:o()(n=e.parts).call(n,((e,t)=>at(at({},e),{},{selected:Boolean(l&&!t)})))})}))},selectPosition(){const{name:t,parentName:n}=a;return o()(e).call(e,(e=>{var l;const{parts:a}=e,r=e.name===n,c=r&&(null===(l=(null==a?void 0:x()(a).call(a,(e=>e.name===t)))||a[0])||void 0===l?void 0:l.name);return at(at({},e),{},{selected:r,parts:o()(a).call(a,(e=>at(at({},e),{},{selected:Boolean(c&&c===e.name)})))})}))}};return(null==r||null===(n=r[l])||void 0===n?void 0:n.call(r))||e}function it(e){var t,n,a,r;let{styleList:c}=e;const[i,s]=(0,l.useReducer)(ct,c),u=(0,l.useContext)(Be),[d,m]=(0,l.useState)(u.loading),p=x()(i).call(i,(e=>{let{selected:t}=e;return t})),f=null==p?void 0:x()(t=p.parts).call(t,(e=>{let{selected:t}=e;return t})),v=(null==f?void 0:f.images.length)||0,[h,b]=(0,l.useState)(1),g=(0,l.useCallback)((e=>b((t=>{const n=t+e;return Math.min(v,Math.max(1,n))}))),[v]);return u.updateTexture((null==i||null===(n=x()(i).call(i,(e=>{let{selected:t}=e;return t})))||void 0===n||null===(a=n.parts)||void 0===a||null===(r=x()(a).call(a,(e=>{let{selected:t}=e;return t})))||void 0===r?void 0:r.images[h-1])||""),(0,l.useEffect)((()=>{const e=u.loading$.pipe((0,I.b)(100)).subscribe((e=>m(e)));return()=>{e.unsubscribe()}}),[]),nt.createElement(nt.Fragment,null,nt.createElement(Je,null),nt.createElement("dl",{className:Ae["menu-nav"]},function(e,t,n,a){var r;return o()(r=[["风格",e,e=>{a(1),t({type:"selectStyle",payload:{name:e}})}],["位置",n,(e,n)=>{a(1),t({type:"selectPosition",payload:{name:e,parentName:n}})}]]).call(r,(e=>{var t;let[n,a,r]=e;return nt.createElement(l.Fragment,{key:n},nt.createElement("dt",null,"".concat(n,"：")),nt.createElement("dd",null,null===(t=je()(a)?a:null==a?void 0:a.parts)||void 0===t?void 0:o()(t).call(t,(e=>{let{name:t,selected:n}=e;return nt.createElement("span",{role:"button",tabIndex:0,key:t,className:n?"selected":"",onClick:()=>r(t,null==a?void 0:a.name),onKeyDown:()=>r(t,null==a?void 0:a.name)},t)}))))}))}(i,s,p,b)),nt.createElement(tt,{pageIndex:h,pageSize:1,total:(null==f?void 0:f.images.length)||0,onClick:g}),d?nt.createElement(Me,null):null)}function ot(){const e=rt.read();return nt.createElement(it,{styleList:e})}function st(){return nt.createElement(l.Suspense,{fallback:nt.createElement(Me,null)},nt.createElement(ot,null))}var ut=n(67294);function dt(){var e;const[t]=(0,l.useState)(new ie),n=(0,l.useCallback)(c()(e=t.init).call(e,t),[]);return ut.createElement(Be.Provider,{value:t},ut.createElement(v,{init:n,renderMoreContent:st}))}var mt=n(67294);function pt(){return mt.createElement(dt,null)}var ft=n(67294);(0,a.s)(document.getElementById("root")).render(ft.createElement(l.StrictMode,null,ft.createElement(pt,null)))}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return l[e](n,n.exports,r),n.exports}r.m=l,e=[],r.O=(t,n,l,a)=>{if(!n){var c=1/0;for(u=0;u<e.length;u++){for(var[n,l,a]=e[u],i=!0,o=0;o<n.length;o++)(!1&a||c>=a)&&Object.keys(r.O).every((e=>r.O[e](n[o])))?n.splice(o--,1):(i=!1,a<c&&(c=a));if(i){e.splice(u--,1);var s=l();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,l,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,l){if(1&l&&(e=this(e)),8&l)return e;if("object"==typeof e&&e){if(4&l&&e.__esModule)return e;if(16&l&&"function"==typeof e.then)return e}var a=Object.create(null);r.r(a);var c={};t=t||[null,n({}),n([]),n(n)];for(var i=2&l&&e;"object"==typeof i&&!~t.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,r.d(a,c),a},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,a,[c,i,o]=n,s=0;if(c.some((t=>0!==e[t]))){for(l in i)r.o(i,l)&&(r.m[l]=i[l]);if(o)var u=o(r)}for(t&&t(n);s<c.length;s++)a=c[s],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkreact_practice=self.webpackChunkreact_practice||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=r.O(void 0,[438],(()=>r(34552)));c=r.O(c)})();